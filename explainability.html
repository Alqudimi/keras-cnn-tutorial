<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="تفسير نماذج التعلم العميق - Grad-CAM, CAM, تصور الفلاتر, TensorBoard">
  <title>تفسير النموذج Explainability | دليل التعلم العميق</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700;800&family=Cairo:wght@400;500;600;700&family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <div class="progress-bar"></div>
  
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-content">
        <a href="index.html" class="logo">
          <div class="logo-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2L2 7l10 5 10-5-10-5z"/>
              <path d="M2 17l10 5 10-5"/>
              <path d="M2 12l10 5 10-5"/>
            </svg>
          </div>
          <span class="logo-text">دليل التعلم العميق</span>
        </a>
        
        <nav class="nav">
          <a href="index.html" class="nav-link">الرئيسية</a>
          <a href="architecture.html" class="nav-link">معمارية النموذج</a>
          <a href="preprocessing.html" class="nav-link">معالجة الصور</a>
          <a href="training-settings.html" class="nav-link">إعدادات التدريب</a>
          <a href="training-phases.html" class="nav-link">مراحل التدريب</a>
          <a href="examples.html" class="nav-link">الأمثلة العملية</a>
        </nav>
        
        <div class="header-actions">
          <button class="search-btn" aria-label="بحث">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
          </button>
          <button class="theme-toggle" aria-label="تبديل الوضع">
            <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"/>
            </svg>
            <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"/>
            </svg>
          </button>
          <button class="mobile-menu-toggle" aria-label="القائمة">
            <span></span><span></span><span></span>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Mobile Navigation -->
  <div class="mobile-nav-overlay"></div>
  <nav class="mobile-nav">
    <div class="mobile-nav-header">
      <span class="logo">دليل التعلم العميق</span>
      <button class="mobile-nav-close" aria-label="إغلاق">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
        </svg>
      </button>
    </div>
    <div class="mobile-nav-accordion">
        <!-- 1. الأساسيات -->
        <div class="accordion-item">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                    </svg>
                    الأساسيات
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content">
                <div class="accordion-body">
                    <a href="index.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                        </svg>
                        الرئيسية
                    </a>
                </div>
            </div>
        </div>

        <!-- 2. بناء النموذج -->
        <div class="accordion-item">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                    </svg>
                    بناء النموذج
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content">
                <div class="accordion-body">
                    <a href="architecture.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                        </svg>
                        معمارية النموذج
                    </a>
                </div>
            </div>
        </div>

        <!-- 3. إعداد البيانات -->
        <div class="accordion-item">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                    إعداد البيانات
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content">
                <div class="accordion-body">
                    <a href="preprocessing.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        معالجة الصور
                    </a>
                    <a href="dataset.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10m0 0h4m-4 0l4-4m-4 4l4 4m-4-4h12a2 2 0 002-2V9a2 2 0 00-2-2h-4m-7 0l-3 3"/>
                        </svg>
                        مجموعة البيانات
                    </a>
                </div>
            </div>
        </div>

        <!-- 4. التدريب والتحسين -->
        <div class="accordion-item">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    التدريب والتحسين
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content">
                <div class="accordion-body">
                    <a href="training-settings.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        إعدادات التدريب
                    </a>
                    <a href="training-phases.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        مراحل التدريب
                    </a>
                    <a href="performance.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                        </svg>
                        الأداء
                    </a>
                </div>
            </div>
        </div>

        <!-- 5. التقييم والتفسير -->
        <div class="accordion-item active">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6m3 0V7a2 2 0 012-2h2a2 2 0 012 2v12m0 0h3.623c.445 0 .74-.401.585-.802l-3.5-7A1.125 1.125 0 0117.5 9h2.5a2 2 0 012 2v7.25c0 .556-.444 1.25-1.25 1.25H9z"/>
                    </svg>
                    التقييم والتفسير
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content" style="max-height: 2000px;">
                <div class="accordion-body">
                    <a href="evaluation.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6m3 0V7a2 2 0 012-2h2a2 2 0 012 2v12m0 0h3.623c.445 0 .74-.401.585-.802l-3.5-7A1.125 1.125 0 0117.5 9h2.5a2 2 0 012 2v7.25c0 .556-.444 1.25-1.25 1.25H9z"/>
                        </svg>
                        التقييم
                    </a>
                    <a href="explainability.html" class="mobile-nav-link active">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9.247a1 1 0 01.791-.764 1 1 0 11.424 1.963 1 1 0 01-.791.764zm-1.782 1.018a1 1 0 01.791-.764 1 1 0 11.424 1.963 1 1 0 01-.791.764zm-1.782 1.018a1 1 0 01.791-.764 1 1 0 11.424 1.963 1 1 0 01-.791.764zm-1.782 1.018a1 1 0 01.791-.764 1 1 0 11.424 1.963 1 1 0 01-.791.764zM12 21a9 9 0 100-18 9 9 0 000 18z"/>
                        </svg>
                        قابلية التفسير
                    </a>
                </div>
            </div>
        </div>

        <!-- 6. الأمثلة العملية -->
        <div class="accordion-item">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                    </svg>
                    الأمثلة العملية
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content">
                <div class="accordion-body">
                    <a href="examples.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                        </svg>
                        نظرة عامة
                    </a>
                    <a href="cats-dogs.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21H6.737a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.737 10H13m0 0V9a2 2 0 00-2-2h-2a2 2 0 00-2 2v1m-3 0h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21H6.737a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.737 10H13"/>
                        </svg>
                        القطط والكلاب
                    </a>
                    <a href="fashion-mnist.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>
                        </svg>
                        مجموعة بيانات الأزياء
                    </a>
                    <a href="flowers.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v-2m-2 2h4m-4 0l4-4m-4 4l4 4m-4-4h12a2 2 0 002-2V9a2 2 0 00-2-2h-4m-7 0l-3 3"/>
                        </svg>
                        مجموعة بيانات الزهور
                    </a>
                    <a href="plant-disease.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                        </svg>
                        أمراض النباتات
                    </a>
                </div>
            </div>
        </div>

        <!-- 7. أدوات وموارد -->
        <div class="accordion-item">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                    </svg>
                    أدوات وموارد
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content">
                <div class="accordion-body">
                    <a href="code-templates.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                        </svg>
                        قوالب الكود
                    </a>
                    <a href="common-mistakes.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        الأخطاء الشائعة
                    </a>
                    <a href="deployment.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                        النشر
                    </a>
                </div>
            </div>
        </div>
    </div>
            </div>
        </div>

        <!-- 2. بناء النموذج -->
        <div class="accordion-item">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                    </svg>
                    بناء النموذج
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content">
                <div class="accordion-body">
                    <a href="architecture.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                        </svg>
                        معمارية النموذج
                    </a>
                </div>
            </div>
        </div>

        <!-- 3. إعداد البيانات -->
        <div class="accordion-item">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                    </svg>
                    إعداد البيانات
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content">
                <div class="accordion-body">
                    <a href="preprocessing.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                        معالجة الصور
                    </a>
                    <a href="dataset.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10m0 0h4m-4 0l4-4m-4 4l4 4m-4-4h12a2 2 0 002-2V9a2 2 0 00-2-2h-4m-7 0l-3 3"/>
                        </svg>
                        مجموعة البيانات
                    </a>
                </div>
            </div>
        </div>

        <!-- 4. التدريب والتحسين -->
        <div class="accordion-item">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    التدريب والتحسين
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content">
                <div class="accordion-body">
                    <a href="training-settings.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        إعدادات التدريب
                    </a>
                    <a href="training-phases.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                        </svg>
                        مراحل التدريب
                    </a>
                    <a href="performance.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"/>
                        </svg>
                        الأداء
                    </a>
                </div>
            </div>
        </div>

        <!-- 5. التقييم والتفسير -->
        <div class="accordion-item">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6m3 0V7a2 2 0 012-2h2a2 2 0 012 2v12m0 0h3.623c.445 0 .74-.401.585-.802l-3.5-7A1.125 1.125 0 0117.5 9h2.5a2 2 0 012 2v7.25c0 .556-.444 1.25-1.25 1.25H9z"/>
                    </svg>
                    التقييم والتفسير
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content">
                <div class="accordion-body">
                    <a href="evaluation.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6m3 0V7a2 2 0 012-2h2a2 2 0 012 2v12m0 0h3.623c.445 0 .74-.401.585-.802l-3.5-7A1.125 1.125 0 0117.5 9h2.5a2 2 0 012 2v7.25c0 .556-.444 1.25-1.25 1.25H9z"/>
                        </svg>
                        التقييم
                    </a>
                    <a href="explainability.html" class="mobile-nav-link active">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9.247a1 1 0 01.791-.764 1 1 0 11.424 1.963 1 1 0 01-.791.764zm-1.782 1.018a1 1 0 01.791-.764 1 1 0 11.424 1.963 1 1 0 01-.791.764zm-1.782 1.018a1 1 0 01.791-.764 1 1 0 11.424 1.963 1 1 0 01-.791.764zm-1.782 1.018a1 1 0 01.791-.764 1 1 0 11.424 1.963 1 1 0 01-.791.764zM12 21a9 9 0 100-18 9 9 0 000 18z"/>
                        </svg>
                        قابلية التفسير
                    </a>
                </div>
            </div>
        </div>

        <!-- 6. الأمثلة العملية -->
        <div class="accordion-item">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                    </svg>
                    الأمثلة العملية
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content">
                <div class="accordion-body">
                    <a href="examples.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                        </svg>
                        نظرة عامة
                    </a>
                    <a href="cats-dogs.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 10h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21H6.737a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.737 10H13m0 0V9a2 2 0 00-2-2h-2a2 2 0 00-2 2v1m-3 0h4.764a2 2 0 011.789 2.894l-3.5 7A2 2 0 0115.263 21H6.737a2 2 0 01-1.789-2.894l3.5-7A2 2 0 018.737 10H13"/>
                        </svg>
                        القطط والكلاب
                    </a>
                    <a href="fashion-mnist.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>
                        </svg>
                        مجموعة بيانات الأزياء
                    </a>
                    <a href="flowers.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 3v4M3 5h4M6 17v-2m-2 2h4m-4 0l4-4m-4 4l4 4m-4-4h12a2 2 0 002-2V9a2 2 0 00-2-2h-4m-7 0l-3 3"/>
                        </svg>
                        مجموعة بيانات الزهور
                    </a>
                    <a href="plant-disease.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                        </svg>
                        أمراض النباتات
                    </a>
                </div>
            </div>
        </div>

        <!-- 7. أدوات وموارد -->
        <div class="accordion-item">
            <button class="accordion-header">
                <span class="accordion-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                    </svg>
                    أدوات وموارد
                </span>
                <svg class="accordion-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                </svg>
            </button>
            <div class="accordion-content">
                <div class="accordion-body">
                    <a href="code-templates.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                        </svg>
                        قوالب الكود
                    </a>
                    <a href="common-mistakes.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        الأخطاء الشائعة
                    </a>
                    <a href="deployment.html" class="mobile-nav-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14M12 5l7 7-7 7"/>
                        </svg>
                        النشر
                    </a>
                </div>
            </div>
        </div>
    </div>
  </nav>

  <main class="container">
    <div class="page-layout">
      <!-- Sidebar -->
      <aside class="sidebar">
        <div class="sidebar-title">محتويات الصفحة</div>
        <nav class="sidebar-nav">
          <a href="#intro" class="sidebar-link">مقدمة</a>
          <a href="#gradcam" class="sidebar-link">Grad-CAM</a>
          <a href="#cam" class="sidebar-link">CAM</a>
          <a href="#filters" class="sidebar-link">تصور الفلاتر</a>
          <a href="#tensorboard" class="sidebar-link">TensorBoard</a>
          <a href="#why-decision" class="sidebar-link">لماذا هذا القرار؟</a>
        </nav>
      </aside>

      <!-- Main Content -->
      <article class="main-content">
        <header class="page-header">
          <nav class="breadcrumb">
            <a href="index.html">الرئيسية</a>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
            <span>تفسير النموذج</span>
          </nav>
          <h1 class="page-title">تفسير النموذج (Explainability)</h1>
          <p class="page-description">
            فهم كيف ولماذا يتخذ نموذج التعلم العميق قراراته.
            تقنيات التصور والتفسير لبناء الثقة في النماذج.
          </p>
        </header>

        <!-- Introduction -->
        <section id="intro" class="content-section">
          <h2>مقدمة: لماذا نحتاج تفسير النموذج؟</h2>
          
          <p>
            نماذج التعلم العميق غالباً ما تُعتبر "صناديق سوداء" - نعرف المدخلات والمخرجات 
            لكن لا نفهم ما يحدث بينهما. تفسير النموذج يساعدنا على:
          </p>

          <ul style="color: var(--text-secondary); margin-bottom: var(--space-lg);">
            <li style="margin-bottom: var(--space-sm);"><strong>بناء الثقة:</strong> فهم لماذا يتخذ النموذج قراراً معيناً</li>
            <li style="margin-bottom: var(--space-sm);"><strong>اكتشاف الأخطاء:</strong> معرفة إذا كان النموذج يركز على الأشياء الصحيحة</li>
            <li style="margin-bottom: var(--space-sm);"><strong>التحسين:</strong> تحديد نقاط الضعف وكيفية إصلاحها</li>
            <li style="margin-bottom: var(--space-sm);"><strong>الامتثال:</strong> في بعض المجالات (الطب، القانون) يجب تبرير القرارات</li>
          </ul>

          <div class="info-card info">
            <svg class="info-card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <div class="info-card-content">
              <h4>مثال على أهمية التفسير</h4>
              <p>
                نموذج لتصنيف الذئاب والكلاب حقق دقة 95%، لكن عند التحليل اتضح أنه يركز على 
                الخلفية (ثلج للذئاب، عشب للكلاب) وليس الحيوان نفسه! بدون التفسير، كان سيفشل في الإنتاج.
              </p>
            </div>
          </div>
        </section>

        <!-- Grad-CAM -->
        <section id="gradcam" class="content-section">
          <h2>Grad-CAM (Gradient-weighted Class Activation Mapping)</h2>
          
          <p>
            Grad-CAM يُظهر أي مناطق من الصورة أثرت أكثر على قرار النموذج. 
            يستخدم التدرجات (gradients) لتحديد أهمية كل بكسل.
          </p>

          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">Python</span>
              <button class="copy-btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
                نسخ
              </button>
            </div>
            <div class="code-content">
<pre><code>import tensorflow as tf
import numpy as np
import matplotlib.pyplot as plt
import cv2

def make_gradcam_heatmap(img_array, model, last_conv_layer_name, pred_index=None):
    """
    إنشاء خريطة حرارية Grad-CAM
    
    Args:
        img_array: الصورة المُعالجة (batch_size, height, width, channels)
        model: النموذج المدرب
        last_conv_layer_name: اسم آخر طبقة التفاف
        pred_index: فهرس الفئة المراد تحليلها (None = الفئة المتوقعة)
    """
    # إنشاء نموذج يخرج تنشيطات آخر طبقة التفاف والتنبؤات
    grad_model = tf.keras.models.Model(
        inputs=model.inputs,
        outputs=[
            model.get_layer(last_conv_layer_name).output,
            model.output
        ]
    )
    
    # حساب التدرجات
    with tf.GradientTape() as tape:
        conv_outputs, predictions = grad_model(img_array)
        
        if pred_index is None:
            pred_index = tf.argmax(predictions[0])
        
        class_channel = predictions[:, pred_index]
    
    # تدرجات الإخراج بالنسبة لخريطة الميزات
    grads = tape.gradient(class_channel, conv_outputs)
    
    # متوسط التدرجات على كل الأبعاد المكانية
    pooled_grads = tf.reduce_mean(grads, axis=(0, 1, 2))
    
    # ضرب كل قناة في أهميتها
    conv_outputs = conv_outputs[0]
    heatmap = conv_outputs @ pooled_grads[..., tf.newaxis]
    heatmap = tf.squeeze(heatmap)
    
    # تطبيع الخريطة الحرارية
    heatmap = tf.maximum(heatmap, 0) / tf.math.reduce_max(heatmap)
    
    return heatmap.numpy()

def overlay_gradcam(img, heatmap, alpha=0.4):
    """
    دمج الخريطة الحرارية مع الصورة الأصلية
    """
    # تحويل الخريطة الحرارية إلى RGB
    heatmap = np.uint8(255 * heatmap)
    
    # استخدام خريطة ألوان
    jet = plt.cm.get_cmap("jet")
    jet_colors = jet(np.arange(256))[:, :3]
    jet_heatmap = jet_colors[heatmap]
    
    # تغيير حجم الخريطة الحرارية
    jet_heatmap = cv2.resize(jet_heatmap, (img.shape[1], img.shape[0]))
    jet_heatmap = np.uint8(255 * jet_heatmap)
    
    # دمج الصورتين
    superimposed_img = jet_heatmap * alpha + img
    superimposed_img = np.clip(superimposed_img, 0, 255).astype(np.uint8)
    
    return superimposed_img

# الاستخدام
def visualize_gradcam(model, img_path, class_names, layer_name='conv2d_7'):
    # تحميل ومعالجة الصورة
    img = tf.keras.preprocessing.image.load_img(img_path, target_size=(224, 224))
    img_array = tf.keras.preprocessing.image.img_to_array(img)
    img_array = np.expand_dims(img_array, axis=0)
    img_array = img_array / 255.0
    
    # التنبؤ
    predictions = model.predict(img_array)
    pred_class = np.argmax(predictions[0])
    confidence = predictions[0][pred_class]
    
    # إنشاء Grad-CAM
    heatmap = make_gradcam_heatmap(img_array, model, layer_name)
    
    # الدمج والعرض
    original_img = cv2.imread(img_path)
    original_img = cv2.resize(original_img, (224, 224))
    original_img = cv2.cvtColor(original_img, cv2.COLOR_BGR2RGB)
    
    superimposed = overlay_gradcam(original_img, heatmap)
    
    # العرض
    fig, axes = plt.subplots(1, 3, figsize=(15, 5))
    
    axes[0].imshow(original_img)
    axes[0].set_title('Original Image')
    axes[0].axis('off')
    
    axes[1].imshow(heatmap, cmap='jet')
    axes[1].set_title('Grad-CAM Heatmap')
    axes[1].axis('off')
    
    axes[2].imshow(superimposed)
    axes[2].set_title(f'Prediction: {class_names[pred_class]}\n'
                      f'Confidence: {confidence:.1%}')
    axes[2].axis('off')
    
    plt.tight_layout()
    plt.savefig('gradcam_result.png', dpi=150)
    plt.show()

# مثال
visualize_gradcam(model, 'test_image.jpg', class_names, 'conv2d_7')</code></pre>
            </div>
          </div>

          <div class="info-card tip">
            <svg class="info-card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
            </svg>
            <div class="info-card-content">
              <h4>كيف تختار الطبقة؟</h4>
              <p>
                استخدم آخر طبقة التفاف للحصول على أفضل النتائج. 
                يمكنك معرفة اسمها بـ: <code>model.summary()</code> أو 
                <code>[l.name for l in model.layers if 'conv' in l.name]</code>
              </p>
            </div>
          </div>
        </section>

        <!-- CAM -->
        <section id="cam" class="content-section">
          <h2>CAM (Class Activation Mapping)</h2>
          
          <p>
            CAM هي الطريقة الأصلية لإنشاء خرائط التنشيط، لكنها تتطلب بنية محددة للنموذج 
            (Global Average Pooling قبل الطبقة الأخيرة).
          </p>

          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">Python</span>
              <button class="copy-btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
                نسخ
              </button>
            </div>
            <div class="code-content">
<pre><code>def generate_cam(model, img_array, class_idx, last_conv_layer_name):
    """
    إنشاء CAM (يتطلب GAP في البنية)
    """
    # الحصول على أوزان الطبقة الأخيرة
    class_weights = model.layers[-1].get_weights()[0]
    
    # إنشاء نموذج للحصول على خرائط الميزات
    cam_model = tf.keras.Model(
        inputs=model.input,
        outputs=model.get_layer(last_conv_layer_name).output
    )
    
    # الحصول على خرائط الميزات
    feature_maps = cam_model.predict(img_array)
    
    # حساب CAM
    cam = np.zeros(feature_maps.shape[1:3], dtype=np.float32)
    
    for i, w in enumerate(class_weights[:, class_idx]):
        cam += w * feature_maps[0, :, :, i]
    
    # تطبيع
    cam = np.maximum(cam, 0)
    cam = cam / cam.max()
    
    return cam

# مقارنة CAM و Grad-CAM
def compare_cam_gradcam(model, img_path, class_names, layer_name):
    img = tf.keras.preprocessing.image.load_img(img_path, target_size=(224, 224))
    img_array = np.expand_dims(tf.keras.preprocessing.image.img_to_array(img) / 255.0, 0)
    
    pred_class = np.argmax(model.predict(img_array)[0])
    
    cam = generate_cam(model, img_array, pred_class, layer_name)
    gradcam = make_gradcam_heatmap(img_array, model, layer_name)
    
    fig, axes = plt.subplots(1, 3, figsize=(15, 5))
    
    axes[0].imshow(img)
    axes[0].set_title(f'Original\nPredicted: {class_names[pred_class]}')
    
    axes[1].imshow(img)
    axes[1].imshow(cv2.resize(cam, (224, 224)), cmap='jet', alpha=0.5)
    axes[1].set_title('CAM')
    
    axes[2].imshow(img)
    axes[2].imshow(cv2.resize(gradcam, (224, 224)), cmap='jet', alpha=0.5)
    axes[2].set_title('Grad-CAM')
    
    for ax in axes:
        ax.axis('off')
    
    plt.tight_layout()
    plt.show()</code></pre>
            </div>
          </div>
        </section>

        <!-- Filter Visualization -->
        <section id="filters" class="content-section">
          <h2>تصور الفلاتر (Filter Visualization)</h2>
          
          <p>
            تصور ما تتعلمه كل طبقة التفاف يساعد على فهم كيف يبني النموذج تمثيله للصور.
          </p>

          <h3>تصور الفلاتر نفسها</h3>
          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">Python</span>
              <button class="copy-btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
                نسخ
              </button>
            </div>
            <div class="code-content">
<pre><code>def visualize_filters(model, layer_name, max_filters=64):
    """
    تصور فلاتر طبقة التفاف
    """
    # الحصول على أوزان الطبقة
    layer = model.get_layer(layer_name)
    filters, biases = layer.get_weights()
    
    # تطبيع للعرض
    f_min, f_max = filters.min(), filters.max()
    filters = (filters - f_min) / (f_max - f_min)
    
    n_filters = min(filters.shape[-1], max_filters)
    n_cols = 8
    n_rows = (n_filters + n_cols - 1) // n_cols
    
    fig, axes = plt.subplots(n_rows, n_cols, figsize=(n_cols * 1.5, n_rows * 1.5))
    
    for i, ax in enumerate(axes.flat):
        if i < n_filters:
            # عرض الفلتر (أخذ القناة الأولى للملون)
            f = filters[:, :, 0, i] if filters.shape[2] == 3 else filters[:, :, :, i]
            
            if len(f.shape) == 3:
                ax.imshow(f)
            else:
                ax.imshow(f, cmap='gray')
        ax.axis('off')
    
    plt.suptitle(f'Filters from {layer_name}', fontsize=14)
    plt.tight_layout()
    plt.savefig(f'filters_{layer_name}.png', dpi=150)
    plt.show()

# تصور فلاتر عدة طبقات
for layer_name in ['conv2d', 'conv2d_1', 'conv2d_2']:
    visualize_filters(model, layer_name)</code></pre>
            </div>
          </div>

          <h3>تصور خرائط الميزات (Feature Maps)</h3>
          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">Python</span>
              <button class="copy-btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
                نسخ
              </button>
            </div>
            <div class="code-content">
<pre><code>def visualize_feature_maps(model, img_path, layer_names):
    """
    تصور خرائط الميزات لصورة معينة
    """
    # تحميل الصورة
    img = tf.keras.preprocessing.image.load_img(img_path, target_size=(224, 224))
    img_array = np.expand_dims(tf.keras.preprocessing.image.img_to_array(img) / 255.0, 0)
    
    # إنشاء نموذج للحصول على المخرجات الوسيطة
    outputs = [model.get_layer(name).output for name in layer_names]
    activation_model = tf.keras.Model(inputs=model.input, outputs=outputs)
    
    # الحصول على التنشيطات
    activations = activation_model.predict(img_array)
    
    # العرض
    for layer_name, activation in zip(layer_names, activations):
        n_features = min(activation.shape[-1], 32)
        n_cols = 8
        n_rows = (n_features + n_cols - 1) // n_cols
        
        fig, axes = plt.subplots(n_rows, n_cols, figsize=(n_cols * 2, n_rows * 2))
        
        for i, ax in enumerate(axes.flat):
            if i < n_features:
                ax.imshow(activation[0, :, :, i], cmap='viridis')
            ax.axis('off')
        
        plt.suptitle(f'Feature Maps: {layer_name} (shape: {activation.shape[1:]})', fontsize=14)
        plt.tight_layout()
        plt.savefig(f'feature_maps_{layer_name}.png', dpi=150)
        plt.show()

# الاستخدام
conv_layers = [l.name for l in model.layers if 'conv' in l.name][:4]
visualize_feature_maps(model, 'test_image.jpg', conv_layers)</code></pre>
            </div>
          </div>
        </section>

        <!-- TensorBoard -->
        <section id="tensorboard" class="content-section">
          <h2>TensorBoard Visualizations</h2>
          
          <p>
            TensorBoard يوفر واجهة تفاعلية لمراقبة التدريب وتصور البيانات.
          </p>

          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">Python</span>
              <button class="copy-btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
                نسخ
              </button>
            </div>
            <div class="code-content">
<pre><code>import tensorflow as tf
from datetime import datetime
import io

# إعداد TensorBoard callback
log_dir = f"logs/fit/{datetime.now().strftime('%Y%m%d-%H%M%S')}"
tensorboard_callback = tf.keras.callbacks.TensorBoard(
    log_dir=log_dir,
    histogram_freq=1,           # تسجيل التوزيعات كل epoch
    write_graph=True,           # تسجيل البنية
    write_images=True,          # تسجيل صور الأوزان
    update_freq='epoch',
    profile_batch=2             # تحليل الأداء
)

# التدريب مع TensorBoard
model.fit(
    train_dataset,
    epochs=50,
    validation_data=val_dataset,
    callbacks=[tensorboard_callback]
)

# تشغيل TensorBoard
# في Terminal: tensorboard --logdir logs/fit</code></pre>
            </div>
          </div>

          <h3>تسجيل صور مخصصة في TensorBoard</h3>
          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">Python</span>
              <button class="copy-btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
                نسخ
              </button>
            </div>
            <div class="code-content">
<pre><code>class GradCAMCallback(tf.keras.callbacks.Callback):
    """
    Callback لتسجيل Grad-CAM في TensorBoard
    """
    def __init__(self, log_dir, sample_images, class_names, layer_name):
        super().__init__()
        self.file_writer = tf.summary.create_file_writer(log_dir + '/gradcam')
        self.sample_images = sample_images
        self.class_names = class_names
        self.layer_name = layer_name
    
    def on_epoch_end(self, epoch, logs=None):
        if epoch % 5 != 0:  # كل 5 epochs
            return
            
        with self.file_writer.as_default():
            for i, img in enumerate(self.sample_images[:4]):
                img_array = np.expand_dims(img, 0)
                
                # إنشاء Grad-CAM
                heatmap = make_gradcam_heatmap(img_array, self.model, self.layer_name)
                
                # تحويل لصورة
                heatmap_img = np.uint8(255 * heatmap)
                heatmap_img = cv2.applyColorMap(
                    cv2.resize(heatmap_img, (img.shape[1], img.shape[0])),
                    cv2.COLORMAP_JET
                )
                
                # دمج
                superimposed = cv2.addWeighted(
                    (img * 255).astype(np.uint8), 0.6,
                    heatmap_img, 0.4, 0
                )
                
                # تسجيل
                tf.summary.image(
                    f'GradCAM/sample_{i}',
                    np.expand_dims(superimposed, 0),
                    step=epoch
                )

# إضافة callback
gradcam_callback = GradCAMCallback(
    log_dir=log_dir,
    sample_images=sample_images,
    class_names=class_names,
    layer_name='conv2d_7'
)

model.fit(
    train_dataset,
    callbacks=[tensorboard_callback, gradcam_callback]
)</code></pre>
            </div>
          </div>

          <h3>تصور Embeddings</h3>
          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">Python</span>
              <button class="copy-btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
                نسخ
              </button>
            </div>
            <div class="code-content">
<pre><code>from tensorboard.plugins import projector

def log_embeddings(model, test_dataset, log_dir, class_names):
    """
    تسجيل embeddings للتصور في TensorBoard
    """
    # الحصول على الطبقة قبل الأخيرة
    embedding_model = tf.keras.Model(
        inputs=model.input,
        outputs=model.layers[-2].output  # قبل softmax
    )
    
    embeddings = []
    labels = []
    images = []
    
    for batch_images, batch_labels in test_dataset:
        batch_embeddings = embedding_model.predict(batch_images)
        embeddings.extend(batch_embeddings)
        labels.extend(batch_labels.numpy())
        images.extend(batch_images.numpy())
    
    embeddings = np.array(embeddings)
    
    # حفظ البيانات
    np.save(f'{log_dir}/embeddings.npy', embeddings)
    
    # حفظ الـ metadata
    with open(f'{log_dir}/metadata.tsv', 'w') as f:
        for label in labels:
            f.write(f'{class_names[label]}\n')
    
    # إعداد projector
    embedding_var = tf.Variable(embeddings, name='embeddings')
    checkpoint = tf.train.Checkpoint(embedding=embedding_var)
    checkpoint.save(f'{log_dir}/embedding.ckpt')
    
    config = projector.ProjectorConfig()
    embedding = config.embeddings.add()
    embedding.tensor_name = 'embedding/.ATTRIBUTES/VARIABLE_VALUE'
    embedding.metadata_path = 'metadata.tsv'
    
    projector.visualize_embeddings(log_dir, config)
    
    print(f"Embeddings logged. Run: tensorboard --logdir {log_dir}")

log_embeddings(model, test_dataset, log_dir, class_names)</code></pre>
            </div>
          </div>
        </section>

        <!-- Why Decision -->
        <section id="why-decision" class="content-section">
          <h2>لماذا اتخذ النموذج هذا القرار؟</h2>
          
          <p>
            أحياناً نحتاج تفسيراً نصياً لقرار النموذج، وليس فقط خريطة حرارية.
          </p>

          <div class="code-block">
            <div class="code-header">
              <span class="code-lang">Python</span>
              <button class="copy-btn">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
                نسخ
              </button>
            </div>
            <div class="code-content">
<pre><code>def explain_prediction(model, img_path, class_names, layer_name):
    """
    شرح تفصيلي لتنبؤ النموذج
    """
    # تحميل ومعالجة الصورة
    img = tf.keras.preprocessing.image.load_img(img_path, target_size=(224, 224))
    img_array = np.expand_dims(tf.keras.preprocessing.image.img_to_array(img) / 255.0, 0)
    
    # التنبؤ
    predictions = model.predict(img_array)[0]
    pred_class = np.argmax(predictions)
    confidence = predictions[pred_class]
    
    # ترتيب الفئات حسب الاحتمالية
    top_indices = np.argsort(predictions)[::-1][:5]
    
    # Grad-CAM
    heatmap = make_gradcam_heatmap(img_array, model, layer_name, pred_class)
    
    # تحليل الخريطة الحرارية
    heatmap_resized = cv2.resize(heatmap, (224, 224))
    threshold = 0.5
   _region = heatmap_resized > threshold
   _percentage = np.sum(active_region) / heatmap_resized.size * 100
    
    # توليد الشرح
    explanation = f"""
    ═══════════════════════════════════════════════════════════
    تقرير تفسير التنبؤ
    ═══════════════════════════════════════════════════════════
    
    الصورة: {img_path}
    
    التنبؤ الرئيسي: {class_names[pred_class]}
    درجة الثقة: {confidence:.1%}
    
    أعلى 5 احتمالات:
    """
    
    for i, idx in enumerate(top_indices):
        bar = "█" * int(predictions[idx] * 20)
        explanation += f"    {i+1}. {class_names[idx]:15} {predictions[idx]:6.1%} {bar}\n"
    
    explanation += f"""
    تحليل مناطق الاهتمام:
    - نسبة المنطقة النشطة: {active_percentage:.1f}% من الصورة
    - موقع التركيز: {"مركز الصورة" if is_centered(heatmap_resized) else "أطراف الصورة"}
    
    تفسير القرار:
    """
    
    if confidence > 0.9:
        explanation += "    - النموذج واثق جداً من هذا التنبؤ\n"
        explanation += "    - الميزات المكتشفة واضحة ومميزة\n"
    elif confidence > 0.7:
        explanation += "    - النموذج واثق نسبياً من التنبؤ\n"
        explanation += f"    - هناك بعض التشابه مع فئة {class_names[top_indices[1]]}\n"
    else:
        explanation += "    - النموذج غير متأكد من التنبؤ\n"
        explanation += "    - قد تحتاج الصورة لمراجعة بشرية\n"
    
    explanation += """
    ═══════════════════════════════════════════════════════════
    """
    
    print(explanation)
    return explanation

def is_centered(heatmap, threshold=0.5):
    """التحقق إذا كان التركيز في المركز"""
    h, w = heatmap.shape
    center_region = heatmap[h//4:3*h//4, w//4:3*w//4]
    return np.mean(center_region) > np.mean(heatmap) * 1.2

# الاستخدام
explain_prediction(model, 'test_cat.jpg', class_names, 'conv2d_7')</code></pre>
            </div>
          </div>

          <div class="info-card success">
            <svg class="info-card-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            <div class="info-card-content">
              <h4>الخلاصة</h4>
              <p>
                تفسير النماذج ليس رفاهية بل ضرورة. استخدم هذه الأدوات لبناء نماذج أكثر موثوقية،
                واكتشف الأخطاء مبكراً، وقدم شرحاً مقنعاً لقرارات نموذجك.
              </p>
            </div>
          </div>
        </section>

        <!-- Navigation -->
        <nav class="page-nav">
          <a href="evaluation.html" class="page-nav-link prev">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
            </svg>
            <div>
              <span class="page-nav-label">السابق</span>
              <span class="page-nav-title">التقييم والمقاييس</span>
            </div>
          </a>
          <a href="common-mistakes.html" class="page-nav-link next">
            <div>
              <span class="page-nav-label">التالي</span>
              <span class="page-nav-title">الأخطاء الشائعة</span>
            </div>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
            </svg>
          </a>
        </nav>
      </article>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>حول الدليل</h4>
          <p style="color: var(--text-secondary); font-size: 0.9375rem; line-height: 1.7;">
            دليل عربي شامل ومفصل لتعلم التعلم العميق باستخدام TensorFlow و Keras.
          </p>
        </div>
        <div class="footer-section">
          <h4>الأقسام</h4>
          <ul class="footer-links">
            <li><a href="architecture.html">معمارية النموذج</a></li>
            <li><a href="dataset.html">بناء البيانات</a></li>
            <li><a href="evaluation.html">التقييم</a></li>
            <li><a href="explainability.html">تفسير النموذج</a></li>
          </ul>
        </div>
        <div class="footer-section">
          <h4>المزيد</h4>
          <ul class="footer-links">
            <li><a href="common-mistakes.html">الأخطاء الشائعة</a></li>
            <li><a href="performance.html">تحسين الأداء</a></li>
            <li><a href="deployment.html">نشر النموذج</a></li>
            <li><a href="code-templates.html">قوالب الأكواد</a></li>
          </ul>
        </div>
      </div>
      <div class="footer-bottom">
        <p>جميع الحقوق محفوظة © 2024 - دليل التعلم العميق الشامل</p>
      </div>
    </div>
  </footer>

  <!-- Search Modal -->
  <div class="search-modal">
    <div class="search-container">
      <div class="search-input-wrapper">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
        </svg>
        <input type="text" class="search-input" placeholder="ابحث في الدليل... (Ctrl+K)">
      </div>
      <div class="search-results"></div>
    </div>
  </div>

  <script src="js/main.js"></script>
</body>
</html>